{% set route = app.request.attributes.get('_route')%}
<!DOCTYPE html>
<html lang="fr">
	<head>
		<!--[if lt IE 9]>
					<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
				<![endif]-->
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Home - Imaginary Conception</title>
		<link rel="stylesheet" href="{{ asset('CSS/bootstrap.min.css') }}">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
		<link rel="stylesheet" href="{{ asset('CSS/styles.css') }}">
		<link rel="stylesheet" href="{{ asset('CSS/animations.css') }}">
		<link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
		<link rel="stylesheet" href="{{ asset('CSS/aos-mobile.css') }}">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js" defer></script>
		<script src="{{ asset(('JS/bootstrap.bundle.min.js')) }}" defer></script>
		<script src="{{ asset(('JS/script.js')) }}" defer></script>
		<script src="{{ asset(('JS/animations.js')) }}" defer></script>
	</head>
	<body>

		<audio id="keyboard-audio" style="display: none;">
			<source src="{{ asset('audios/keyboardz.mp3') }}">
			<source src="{{ asset('audios/keyboardz.ogg') }}">
		</audio>

		<div class="cursor"></div>
		<div class="cursor-trail"></div>

		<div
			class="container">

            <div class="row mx-auto mt-6 hero-section" data-aos="fade-up">
                <h1 id="animation" class="fw-bold text-center hero-title"></h1>
                <div id="rotating-text" class="text-center text-light fs-4 mt-3 fade-in">
                    <p class="mb-0 rotating-text-item active">Je transforme vos idées en expériences web innovantes</p>
                    <p class="mb-0 rotating-text-item">Développeur web passionné par l'innovation</p>
                    <p class="mb-0 rotating-text-item">Créateur de jeux vidéo avec une vision unique</p>
                    <p class="mb-0 rotating-text-item">Solutions web sur mesure pour votre entreprise</p>
                    <p class="mb-0 rotating-text-item">Expert en développement web et game design</p>
                </div>
            </div>

			<div class="row mx-auto">
                    <nav class="custom-nav mt-4 p-0">
                        <div class="nav-buttons-container">
                            <a href="{{ path('games') }}" class="nav-button register2" data-aos="fade-up">
                                <div class="nav-button-bg games-bg"></div>
                                <span class="nav-button-content">Games</span>
                                <p class="nav-button-description">Découvrez nos jeux vidéo innovants</p>
                            </a>
                            <a href="{{ path('services') }}" class="nav-button register3" data-aos="fade-up" data-aos-delay="200">
                                <div class="nav-button-bg web-bg"></div>
                                <span class="nav-button-content">Web development</span>
                                <p class="nav-button-description">Solutions web sur mesure pour votre entreprise</p>
                                <p class="nav-button-description mt-3 btn-light btn-lg">Découvrir nos services</p>
                            </a>
                            <a href="{{ path('realisations') }}" class="nav-button register4 mb-4" data-aos="fade-up" data-aos-delay="400">
                                <div class="nav-button-bg portfolio-bg"></div>
                                <span class="nav-button-content">Portfolio</span>
                                <p class="nav-button-description">Explorez nos réalisations</p>
                            </a>
                                <a href="{{ path('private_board') }}" class="nav-button mb-4" data-aos="fade-up" data-aos-delay="400">
                                    <div class="nav-button-bg"></div>
                                    <span class="nav-button-content">Tableau de bord</span>
                                    <p class="nav-button-description">Suivez l'évolution de vos projets web en temps réel.</p>
                                </a>
                                <a href="{{ path('avis') }}" class="nav-button mb-4" data-aos="fade-up" data-aos-delay="400">
                                    <div class="nav-button-bg"></div>
                                    <span class="nav-button-content">Avis clients</span>
                                    <p class="nav-button-description">Découvrez ce que nos clients disent de leur expérience avec nous.</p>
                                </a>
                        </div>
                        <style>
                            .custom-nav {
                                width: 100%;
                                max-width: 1200px;
                                margin: 0 auto;
                            }
                            .nav-buttons-container {
                                display: flex;
                                justify-content: center;
                                gap: 2rem;
                                flex-wrap: wrap;
                            }
                            .nav-button {
                                position: relative;
                                padding: 2rem;
                                color: #fff;
                                text-decoration: none;
                                border: 1px solid rgba(255, 0, 0, 0.3);
                                border-radius: 8px;
                                overflow: hidden;
                                transition: all 0.5s ease;
                                flex: 1;
                                min-width: 300px;
                                max-width: 400px;
                                text-align: center;
                                height: 200px;
                                display: flex;
                                flex-direction: column;
                                justify-content: center;
                                background: rgba(0, 0, 0, 0.5);
                            }
                            .nav-button-bg {
                                position: absolute;
                                top: 0;
                                left: 0;
                                width: 100%;
                                height: 100%;
                                z-index: 0;
                                background-size: cover;
                                background-position: center;
                                opacity: 0.5;
                                transition: all 0.5s ease;
                            }
                            .games-bg {
                                background-image: url('{{ asset('Images/gamesimg.png') }}');
                            }
                            .web-bg {
                                background-image: url('{{ asset('Images/code.png') }}');
                            }
                            .portfolio-bg {
                                background-image: url('{{ asset('Images/portfolio.png') }}');
                            }
                            .nav-button:hover {
                                transform: scale(1.05);
                                box-shadow: 0 0 30px rgba(255, 0, 0, 0.4);
                            }
                            .nav-button:hover .nav-button-bg {
                                opacity: 0.8;
                                transform: scale(1.1);
                            }
                            .nav-button-content {
                                font-size: 1.5rem;
                                font-weight: 700;
                                position: relative;
                                z-index: 1;
                                margin-bottom: 1rem;
                            }
                            .nav-button-description {
                                font-size: 1rem;
                                opacity: 0.8;
                                position: relative;
                                z-index: 1;
                                margin: 0;
                            }
                            @media (max-width: 768px) {
                                .nav-buttons-container {
                                    flex-direction: column;
                                    align-items: center;
                                }
                                .nav-button {
                                    width: 100%;
                                    max-width: none;
                                    height: 180px;
                                }
                            }
                        </style>

						{# Bouton quand l'utilisateur est connecté #}

						{% if app.user %}

							{# <hr class="text-light w-25 mx-auto"> #}

							<ul class="navbar-nav flex-lg-row flex-column justify-content-center flex-grow-1 pe-3">
								<li class="nav-item me-lg-3 mb-2 mb-lg-0">
									<a class="link2 register5 my-0 my-lg-5" href="{{ path('contact') }}">Contact</a>
								</li>
								<li class="nav-item me-lg-3 mb-2 mb-lg-0">
									<a class="link2 register6 my-0 my-lg-5" href="{{ path('profil') }}">Profile</a>
								</li>
								<li class="nav-item">
									<a class="link2 register7 my-0 my-lg-5" href="{{ path('logout') }}">Logout</a>
								</li>
							</ul>

							{# Bouton quand l'utilisateur n'est pas connecté #}

						{% else %}

							{# <hr class="text-light w-25 mx-auto"> #}

							<ul class="navbar-nav flex-lg-row flex-column justify-content-center flex-grow-1 pe-3">
								<li class="nav-item me-lg-3 mb-2 mb-lg-0">
									<a class="link2 register5 my-0 my-lg-5" href="{{ path('contact') }}">Contact</a>
								</li>
								<li class="nav-item me-lg-3 mb-2 mb-lg-0">
									<a class="link2 register8 my-0 my-lg-5" href="{{ path('login') }}">Login</a>
								</li>

								<li class="nav-item">
									<a class="link2 register9 my-0 my-lg-5" href="{{ path('register') }}">Register</a>
								</li>
							</ul>

						{% endif %}

						{% if is_granted('ROLE_ADMIN') %}

							{# <hr class="text-light w-25 mx-auto"> #}

							<ul class="navbar-nav flex-lg-row flex-column justify-content-center flex-grow-1 pe-3">
								<li class="nav-item me-lg-3 mb-2 mb-lg-0">
									<a class="link2 register10" href="{{ path('requested_website') }}">Requested quotes</a>
								</li>

								<li class="nav-item me-lg-3 mb-2 mb-lg-0">
									<a class="link2 register11" href="{{ path('users') }}">Users</a>
								</li>

								<li class="nav-item">
									<a class="link2 register12" href="{{ path('add_game') }}">Add game</a>
								</li>
							</ul>

						{% endif %}

					</nav>

				</div>

			</div>

            <style>
                .rotating-text-item {
                    opacity: 0;
                    position: absolute;
                    left: 50%;
                    transform: translateX(-50%);
                    transition: opacity 0.5s ease;
                    width: 100%;
                }
                .rotating-text-item.active {
                    opacity: 1;
                    position: relative;
                }
            </style>

            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const items = document.querySelectorAll('.rotating-text-item');
                    const audio = document.getElementById('keyboard-audio');
                    let currentIndex = 0;
                    let isTyping = false;

                    function typeText(element, text, callback) {
                        let index = 0;
                        isTyping = true;
                        element.textContent = '';
                        element.classList.add('active');

                        function type() {
                            if (index < text.length) {
                                element.textContent += text[index];
                                if (audio.duration > 0 && !audio.paused) {
                                    audio.currentTime = 0;
                                }
                                // audio.play();
                                index++;
                                setTimeout(type, 50);
                            } else {
                                isTyping = false;
                                if (callback) callback();
                            }
                        }
                        type();
                    }

                    function rotateText() {
                        if (isTyping) return;
                        items[currentIndex].classList.remove('active');
                        items[currentIndex].textContent = '';
                        currentIndex = (currentIndex + 1) % items.length;
                        const nextText = items[currentIndex].getAttribute('data-text');
                        typeText(items[currentIndex], nextText);
                    }

                    // Sauvegarder le texte original dans un attribut data-text
                    items.forEach(item => {
                        item.setAttribute('data-text', item.textContent);
                        item.textContent = '';
                    });

                    // Démarrer avec le premier texte
                    typeText(items[0], items[0].getAttribute('data-text'));
                    setInterval(rotateText, 6000);
                });
            </script>

			{% include '_partials/_flashes.html.twig' %}

			<div class="row mx-auto mt-5">

				<div class="game-grid">
				<div class="game-card" data-aos="fade-up">
					<img src="{{ asset('Images/thanatophobia.png') }}" alt="Thanatophobia">
					<h3 class="mt-4">Thanatophobia</h3>
					<p>Sortie : 01/01/2024</p>
					<p>Genre : Horreur</p>
					<a href="https://store.steampowered.com/app/2566310/Thanatophobia/" class="btn btn-dark steam-button" target="_blank">Voir sur Steam</a>
					<a href="{{ path('games') }}" class="btn btn-dark steam-button" target="_blank">Voir sur Imaginary Conception</a>
				</div>
				<div class="game-card" data-aos="fade-up">
					<img src="{{ asset('Images/floorsofmadness.jpg') }}" alt="50 Floors of Madness">
					<h3 class="mt-4">50 Floors of Madness</h3>
					<p>Sortie : 19/07/2024</p>
					<p>Genre : Détection d'anomalies</p>
					<a href="https://store.steampowered.com/app/3043840/50_Floors_of_Madness/" class="btn btn-dark steam-button" target="_blank">Voir sur Steam</a>
					<a href="{{ path('games') }}" class="btn btn-dark steam-button" target="_blank">Voir sur Imaginary Conception</a>
				</div>
				<div class="game-card" data-aos="fade-up">
					<img src="{{ asset('Images/HBLogo.png') }}" alt="Hidden Bloodhunt">
					<h3 class="mt-4">Hidden Bloodhunt</h3>
					<p>Sortie : 15/12/2024</p>
					<p>Genre : Stratégie et trahison</p>
					<a href="https://store.steampowered.com/app/3323130/Hidden_Bloodhunt/" class="btn btn-dark steam-button" target="_blank">Voir sur Steam</a>
					<a href="{{ path('games') }}" class="btn btn-dark steam-button" target="_blank">Voir sur Imaginary Conception</a>
				</div>
				<div class="game-card" data-aos="fade-up">
					<img src="{{ asset('Images/breakingthegrip.png') }}" alt="Breaking the Grip">
					<h3 class="mt-4">Breaking the Grip</h3>
					<p>Sortie : 02/04/2025</p>
					<p>Genre : Horreur asymétrique</p>
					<a href="https://store.steampowered.com/app/3592220/Breaking_the_Grip/" class="btn btn-dark steam-button" target="_blank">Voir sur Steam</a>
					<a href="{{ path('games') }}" class="btn btn-dark steam-button" target="_blank">Voir sur Imaginary Conception</a>
				</div>
			</div>

			<div class="row col-12 mt-5 col-md-8 d-flex justify-content-center mx-auto">

				<div class="row col-12 my-3 text-center">

					<div class="mx-auto mt-3">

						{% for game in games %}

							<div class="row mt-4 d-flex justify-content-center">

								<div id="global">

									<div id="left">
										<div class="d-flex justify-content-center mb-4">
											<img class="img-fluid radius-code" src="{{ asset('Images/Jeux/' ~ game.image) }}" alt="">
										</div>
									</div>

									<div id="right">
										<p class="text-danger fw-bold text-center">Title</p>
										<p class="text-light text-center">{{ game.title }}</p>

										<p class="text-danger fw-bold text-center">Game category</p>
										<p class="text-light text-center">{{ game.genre }}</p>

										<p class="text-danger fw-bold text-center">Price</p>
										<p class="text-light text-center">{{ game.price }}</p>
									</div>

									<hr class="text-light w-50 mx-auto d-lg-none">

								</div>

								<div class="d-flex flex-column mx-auto flex-md-row mb-3">

									{% if not is_granted('ROLE_ADMIN') %}

										<a class="text-decoration-none mx-auto" href="{{ path('game_view', {'title': game.title, 'id': game.id }) }}">See more</a>

									{% endif %}

									{% if is_granted('ROLE_ADMIN') %}

										<div class="d-flex flex-column mx-auto flex-md-row mb-3">

											<a class="text-decoration-none mb-3 mb-lg-0 mx-auto test-3 text-lg-left me-md-3" href="{{ path('game_view', {'title': game.title, 'id': game.id }) }}">See more</a>

											<a class="text-decoration-none test-2 me-auto test me-md-3" href="{{ path('delete_game', {'id': game.id, csrf_token: csrf_token('delete_game_' ~ game.id ) }) }}">
												Delete
											</a>

											<a href="{{ path('edit_game', {'id': game.id}) }}" class="me-auto test text-decoration-none">
												Edit
											</a>

										</div>

									{% endif %}

								</div>

							</div>

						{% else %}

							<div class="row">
								<p class="my-5 col-12 text-center text-light bg-none">There are no games available at the moment.</p>
							</div>

						{% endfor %}

						<div class="d-flex justify-content-center" data-aos="zoom-in">
							<iframe id="steam" src="https://store.steampowered.com/widget/2566310/" frameborder="0" width="646" height="190"></iframe>
						</div>

						<div class="d-flex justify-content-center" data-aos="zoom-in">
							<iframe id="steam" src="https://store.steampowered.com/widget/3043840/" frameborder="0" width="646" height="190"></iframe>
						</div>

						<div class="d-flex justify-content-center" data-aos="zoom-in">
							<iframe id="steam" src="https://store.steampowered.com/widget/3323130/" frameborder="0" width="646" height="190"></iframe>
						</div>

						<div class="d-flex justify-content-center" data-aos="zoom-in">
							<iframe id="steam" src="https://store.steampowered.com/widget/3592220/" frameborder="0" width="646" height="190"></iframe>
						</div>

					</div>

				</div>

                <script>window.aichatbotApiKey="c6336530-debb-4a6f-939c-267af94cef6c"; window.aichatbotProviderId="f9e9c5e4-6d1a-4b8c-8d3f-3f9e9c5e46d1";</script><script src="https://script.chatlab.com/aichatbot.js" id="c6336530-debb-4a6f-939c-267af94cef6c" defer></script>

				{% include '_partials/_footer.html.twig' %}
			</body>
		</html>

        <!-- Chat Widget -->
        {# <link rel="stylesheet" href="{{ asset('CSS/chat.css') }}">
        <script src="{{ asset('JS/chat.js') }}" defer></script> #}

        <!-- AOS Animation Library -->
        <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
        <script>
            AOS.init({
                duration: 1000,
                once: true
            });
        </script>
    </body>
</html>
