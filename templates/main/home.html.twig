{% set route = app.request.attributes.get('_route')%}
<!DOCTYPE html>
<html lang="fr">
	<head>
		<!--[if lt IE 9]>
					<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
				<![endif]-->
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Home - Imaginary Conception</title>
		<link rel="stylesheet" href="{{ asset('CSS/bootstrap.min.css') }}">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
		<link rel="stylesheet" href="{{ asset('CSS/styles.css') }}">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js" defer></script>
		<script src="{{ asset(('JS/bootstrap.bundle.min.js')) }}" defer></script>
		<script src="{{ asset(('JS/script.js')) }}" defer></script>
	</head>
	<body>

		<audio id="keyboard-audio" style="display: none;">
			<source src="{{ asset('audios/keyboard.mp3') }}">
			<source src="{{ asset('audios/keyboard.ogg') }}">
		</audio>

		<div
			class="container">

			<div class="row mx-auto mt-6">
				<h1 id="animation" class="fw-bold text-center"></h1>
			</div>

			{% include '_partials/_flashes.html.twig' %}

			<div class="row mx-auto mt-5">

				<div class="game-grid">
				<div class="game-card">
					<img src="{{ asset('Images/thanatophobia.png') }}" alt="Thanatophobia">
					<h3 class="mt-4">Thanatophobia</h3>
					<p>Sortie : 01/01/2024</p>
					<p>Genre : Horreur</p>
					<a href="https://store.steampowered.com/app/2566310/Thanatophobia/" class="btn btn-dark steam-button" target="_blank">Voir sur Steam</a>
					<a href="{{ path('games') }}" class="btn btn-dark steam-button" target="_blank">Voir sur Imaginary Conception</a>
				</div>
				<div class="game-card">
					<img src="{{ asset('Images/floorsofmadness.jpg') }}" alt="50 Floors of Madness">
					<h3 class="mt-4">50 Floors of Madness</h3>
					<p>Sortie : 19/07/2024</p>
					<p>Genre : Détection d'anomalies</p>
					<a href="https://store.steampowered.com/app/3043840/50_Floors_of_Madness/" class="btn btn-dark steam-button" target="_blank">Voir sur Steam</a>
					<a href="{{ path('games') }}" class="btn btn-dark steam-button" target="_blank">Voir sur Imaginary Conception</a>
				</div>
				<div class="game-card">
					<img src="{{ asset('Images/HBLogo.png') }}" alt="Hidden Bloodhunt">
					<h3 class="mt-4">Hidden Bloodhunt</h3>
					<p>Sortie : 15/12/2024</p>
					<p>Genre : Stratégie et trahison</p>
					<a href="https://store.steampowered.com/app/3323130/Hidden_Bloodhunt/" class="btn btn-dark steam-button" target="_blank">Voir sur Steam</a>
					<a href="{{ path('games') }}" class="btn btn-dark steam-button" target="_blank">Voir sur Imaginary Conception</a>
				</div>
				<div class="game-card">
					<img src="{{ asset('Images/breakingthegrip.png') }}" alt="Breaking the Grip">
					<h3 class="mt-4">Breaking the Grip</h3>
					<p>Sortie : 02/04/2025</p>
					<p>Genre : Horreur asymétrique</p>
					<a href="https://store.steampowered.com/app/3592220/Breaking_the_Grip/" class="btn btn-dark steam-button" target="_blank">Voir sur Steam</a>
					<a href="{{ path('games') }}" class="btn btn-dark steam-button" target="_blank">Voir sur Imaginary Conception</a>
				</div>
			</div>

				<div
					class="row mx-auto">

					<!-- NAVBAR Only full Screen -->

					<nav class="d-block mt-4 p-0">

						<ul class="navbar-nav flex-sm-row flex-column justify-content-center flex-grow-1 pe-3">
							<li class="nav-item me-sm-3 mb-2 mb-lg-0">
								<a class="link2 register2" href="{{ path('games') }}">Games</a>
							</li>
							<li class="nav-item me-sm-3 mb-2 mb-lg-0">
								<a class="link2 register3" href="{{ path('website') }}">Web design</a>
							</li>
							<li class="nav-item mb-5">
								<a class="link2 register4" href="{{ path('portfolio') }}">Portfolio</a>
							</li>
						</ul>

						{# Bouton quand l'utilisateur est connecté #}

						{% if app.user %}

							{# <hr class="text-light w-25 mx-auto"> #}

							<ul class="navbar-nav flex-lg-row flex-column justify-content-center flex-grow-1 pe-3">
								<li class="nav-item me-lg-3 mb-2 mb-lg-0">
									<a class="link2 register5 my-0 my-lg-5" href="{{ path('contact') }}">Contact</a>
								</li>
								<li class="nav-item me-lg-3 mb-2 mb-lg-0">
									<a class="link2 register6 my-0 my-lg-5" href="{{ path('profil') }}">Profile</a>
								</li>
								<li class="nav-item">
									<a class="link2 register7 my-0 my-lg-5" href="{{ path('logout') }}">Logout</a>
								</li>
							</ul>

							{# Bouton quand l'utilisateur n'est pas connecté #}

						{% else %}

							{# <hr class="text-light w-25 mx-auto"> #}

							<ul class="navbar-nav flex-lg-row flex-column justify-content-center flex-grow-1 pe-3">
								<li class="nav-item me-lg-3 mb-2 mb-lg-0">
									<a class="link2 register5 my-0 my-lg-5" href="{{ path('contact') }}">Contact</a>
								</li>
								<li class="nav-item me-lg-3 mb-2 mb-lg-0">
									<a class="link2 register8 my-0 my-lg-5" href="{{ path('login') }}">Login</a>
								</li>

								<li class="nav-item">
									<a class="link2 register9 my-0 my-lg-5" href="{{ path('register') }}">Register</a>
								</li>
							</ul>

						{% endif %}

						{% if is_granted('ROLE_ADMIN') %}

							{# <hr class="text-light w-25 mx-auto"> #}

							<ul class="navbar-nav flex-lg-row flex-column justify-content-center flex-grow-1 pe-3">
								<li class="nav-item me-lg-3 mb-2 mb-lg-0">
									<a class="link2 register10" href="{{ path('requested_website') }}">Websites purchases</a>
								</li>

								<li class="nav-item me-lg-3 mb-2 mb-lg-0">
									<a class="link2 register11" href="{{ path('users') }}">Users</a>
								</li>

								<li class="nav-item">
									<a class="link2 register12" href="{{ path('add_game') }}">Add game</a>
								</li>
							</ul>

						{% endif %}

					</nav>

				</div>

			</div>

			<div class="row col-12 mt-5 col-md-8 d-flex justify-content-center mx-auto">

				<div class="row col-12 my-3 text-center">

					<div class="mx-auto mt-3">

						{% for game in games %}

							<div class="row mt-4 d-flex justify-content-center">

								<div id="global">

									<div id="left">
										<div class="d-flex justify-content-center mb-4">
											<img class="img-fluid radius-code" src="{{ asset('Images/Jeux/' ~ game.image) }}" alt="">
										</div>
									</div>

									<div id="right">
										<p class="text-danger fw-bold text-center">Title</p>
										<p class="text-light text-center">{{ game.title }}</p>

										<p class="text-danger fw-bold text-center">Game category</p>
										<p class="text-light text-center">{{ game.genre }}</p>

										<p class="text-danger fw-bold text-center">Price</p>
										<p class="text-light text-center">{{ game.price }}</p>
									</div>

									<hr class="text-light w-50 mx-auto d-lg-none">

								</div>

								<div class="d-flex flex-column mx-auto flex-md-row mb-3">

									{% if not is_granted('ROLE_ADMIN') %}

										<a class="text-decoration-none mx-auto" href="{{ path('game_view', {'title': game.title, 'id': game.id }) }}">See more</a>

									{% endif %}

									{% if is_granted('ROLE_ADMIN') %}

										<div class="d-flex flex-column mx-auto flex-md-row mb-3">

											<a class="text-decoration-none mb-3 mb-lg-0 mx-auto test-3 text-lg-left me-md-3" href="{{ path('game_view', {'title': game.title, 'id': game.id }) }}">See more</a>

											<a class="text-decoration-none test-2 me-auto test me-md-3" href="{{ path('delete_game', {'id': game.id, csrf_token: csrf_token('delete_game_' ~ game.id ) }) }}">
												Delete
											</a>

											<a href="{{ path('edit_game', {'id': game.id}) }}" class="me-auto test text-decoration-none">
												Edit
											</a>

										</div>

									{% endif %}

								</div>

							</div>

						{% else %}

							<div class="row">
								<p class="my-5 col-12 text-center text-light bg-none">There are no games available at the moment.</p>
							</div>

						{% endfor %}

						<div class="d-flex justify-content-center">
							<iframe id="steam" src="https://store.steampowered.com/widget/2566310/" frameborder="0" width="646" height="190"></iframe>
						</div>

						<div class="d-flex justify-content-center">
							<iframe id="steam" src="https://store.steampowered.com/widget/3043840/" frameborder="0" width="646" height="190"></iframe>
						</div>

						<div class="d-flex justify-content-center">
							<iframe id="steam" src="https://store.steampowered.com/widget/3323130/" frameborder="0" width="646" height="190"></iframe>
						</div>

						<div class="d-flex justify-content-center">
							<iframe id="steam" src="https://store.steampowered.com/widget/3592220/" frameborder="0" width="646" height="190"></iframe>
						</div>

					</div>

				</div>

				{% include '_partials/_footer.html.twig' %}
			</body>
		</html>
	</body>
</html>
